// Test just calc_modrm_byte

// Calculate ModR/M byte
func:calc_modrm_byte = *uint8(int8:reg_field, int8:rm_field, int8:mod_field) {
    int8:mod_val = 0;
    int8:reg_val = 0;
    int8:rm_val = 0;
    uint8:result = 0;
    
    mod_val = mod_field & 3;
    reg_val = reg_field & 7;
    rm_val = rm_field & 7;
    
    result = (uint8)mod_val << 6;
    result |= (uint8)reg_val << 3;
    result |= (uint8)rm_val;
    
    return result;
};

func:main = *int8() {
    uint8:m = calc_modrm_byte(7, 0, 3);
    return 0;
};
