// Test struct support in Aria

const Point = struct {
    x: int64,
    y: int64,
};

func:create_point = Point(int64:px, int64:py) {
    Point:p = Point{x: px, y: py};
    return p;
};

func:distance_squared = *int64(Point:a, Point:b) {
    int64:dx = b.x - a.x;
    int64:dy = b.y - a.y;
    return dx * dx + dy * dy;
};

func:main = *int8() {
    print("Testing struct support...");
    
    Point:origin = Point{x: 0, y: 0};
    Point:target = create_point(3, 4);
    
    int64:dist = distance_squared(origin, target);
    print("Distance squared: should be 25");
    
    if (dist == 25) {
        print("✓ Struct test PASSED");
        return 0;
    } else {
        print("✗ Struct test FAILED");
        return 1;
    }
};
