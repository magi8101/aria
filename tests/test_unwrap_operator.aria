// Test ? unwrap operator with new uint8 error code Result types
func:safe_divide = int8(int8:a, int8:b) {
    if(b == 0) {
        return {err:1, val:0};  // Error code 1 = division by zero
    }
    return {err:0, val:a / b};  // Error code 0 = success
};

func:test_unwrap_with_default = *int8() {
    int8:v1 = safe_divide(10, 2) ? -1;  // Should get 5
    int8:v2 = safe_divide(10, 0) ? -1;  // Should get -1 (error)
    
    return v1 + v2;  // Should be 5 + (-1) = 4
};

func:main = *int8() {
    return test_unwrap_with_default() ? -1;
};
